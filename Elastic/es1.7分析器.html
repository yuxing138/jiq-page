<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>/ | YuXing138</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.9f84806b.css" as="style"><link rel="preload" href="/assets/js/app.ea24880d.js" as="script"><link rel="preload" href="/assets/js/2.ae7b2f73.js" as="script"><link rel="preload" href="/assets/js/1.5784faf9.js" as="script"><link rel="preload" href="/assets/js/33.6e0d0fb4.js" as="script"><link rel="prefetch" href="/assets/js/10.11cd5bbe.js"><link rel="prefetch" href="/assets/js/11.d6f242fd.js"><link rel="prefetch" href="/assets/js/12.52955fb8.js"><link rel="prefetch" href="/assets/js/13.0171e0e6.js"><link rel="prefetch" href="/assets/js/14.e8630228.js"><link rel="prefetch" href="/assets/js/15.e3fe6a55.js"><link rel="prefetch" href="/assets/js/16.ed16aad5.js"><link rel="prefetch" href="/assets/js/17.9f06ecf6.js"><link rel="prefetch" href="/assets/js/18.4c170722.js"><link rel="prefetch" href="/assets/js/19.66f6de90.js"><link rel="prefetch" href="/assets/js/20.2e3db1a8.js"><link rel="prefetch" href="/assets/js/21.ce1d45a6.js"><link rel="prefetch" href="/assets/js/22.da4a9ea1.js"><link rel="prefetch" href="/assets/js/23.a3f0a356.js"><link rel="prefetch" href="/assets/js/24.165c22e8.js"><link rel="prefetch" href="/assets/js/25.ef6bee2b.js"><link rel="prefetch" href="/assets/js/26.ac8fb2db.js"><link rel="prefetch" href="/assets/js/27.802e5125.js"><link rel="prefetch" href="/assets/js/28.4433c745.js"><link rel="prefetch" href="/assets/js/29.312e1c22.js"><link rel="prefetch" href="/assets/js/3.e5de98dd.js"><link rel="prefetch" href="/assets/js/30.43c17849.js"><link rel="prefetch" href="/assets/js/31.954bf7eb.js"><link rel="prefetch" href="/assets/js/32.cf55a367.js"><link rel="prefetch" href="/assets/js/34.26b91c2e.js"><link rel="prefetch" href="/assets/js/35.7147704b.js"><link rel="prefetch" href="/assets/js/36.9e697bfb.js"><link rel="prefetch" href="/assets/js/37.dda23f8b.js"><link rel="prefetch" href="/assets/js/38.83114897.js"><link rel="prefetch" href="/assets/js/39.a0c5ce1b.js"><link rel="prefetch" href="/assets/js/4.45665f8a.js"><link rel="prefetch" href="/assets/js/40.6c859c53.js"><link rel="prefetch" href="/assets/js/41.382e2695.js"><link rel="prefetch" href="/assets/js/42.06fa675c.js"><link rel="prefetch" href="/assets/js/43.bc597265.js"><link rel="prefetch" href="/assets/js/44.0c57b70b.js"><link rel="prefetch" href="/assets/js/45.3dd7b1ea.js"><link rel="prefetch" href="/assets/js/46.6e6bc691.js"><link rel="prefetch" href="/assets/js/5.9221cc65.js"><link rel="prefetch" href="/assets/js/6.08529f20.js"><link rel="prefetch" href="/assets/js/7.d6f7c6a1.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9f84806b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">YuXing138</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Clouder Menu" class="dropdown-title"><span class="title">Clouder</span> <span class="arrow down"></span></button> <button type="button" aria-label="Clouder Menu" class="mobile-dropdown-title"><span class="title">Clouder</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Clouder/Clouder.html" class="nav-link">
  Clouder
</a></li><li class="dropdown-item"><!----> <a href="/Clouder/Clouder源码介绍.html" class="nav-link">
  Clouder源码介绍
</a></li><li class="dropdown-item"><!----> <a href="/Clouder/怎么开源.html" class="nav-link">
  怎么开源
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Elastic Menu" class="dropdown-title"><span class="title">Elastic</span> <span class="arrow down"></span></button> <button type="button" aria-label="Elastic Menu" class="mobile-dropdown-title"><span class="title">Elastic</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Elastic/es1.1环境安装.html" class="nav-link">
  es1.1环境安装
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es1.2一些概念.html" class="nav-link">
  es1.2一些概念
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es1.3一些API.html" class="nav-link">
  es1.3一些API
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es1.4查询.html" class="nav-link">
  es1.4查询
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es1.5聚合查询.html" class="nav-link">
  es1.5聚合查询
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es1.6ORM.html" class="nav-link">
  es1.6ORM
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es1.7分析器.html" class="nav-link">
  es1.7分析器
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es1.8脚本语言.html" class="nav-link">
  es1.8脚本语言
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es1.9搜索建议.html" class="nav-link">
  es1.9搜索建议
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es2.1高可用性.html" class="nav-link">
  es2.1高可用性
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es2.2搜索查询.html" class="nav-link">
  es2.2搜索查询
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es2.3倒排索引.html" class="nav-link">
  es2.3倒排索引
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es2.4地理查询.html" class="nav-link">
  es2.4地理查询
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es2.5一些概念.html" class="nav-link">
  es2.5一些概念
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es2.6相似性评分.html" class="nav-link">
  es2.6相似性评分
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es2.7乐观并发控制.html" class="nav-link">
  es2.7乐观并发控制
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java面试题 Menu" class="dropdown-title"><span class="title">Java面试题</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java面试题 Menu" class="mobile-dropdown-title"><span class="title">Java面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Java面试题/一些面试题.html" class="nav-link">
  一些面试题
</a></li><li class="dropdown-item"><!----> <a href="/Java面试题/面试经典150题.html" class="nav-link">
  面试经典150题
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Clouder Menu" class="dropdown-title"><span class="title">Clouder</span> <span class="arrow down"></span></button> <button type="button" aria-label="Clouder Menu" class="mobile-dropdown-title"><span class="title">Clouder</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Clouder/Clouder.html" class="nav-link">
  Clouder
</a></li><li class="dropdown-item"><!----> <a href="/Clouder/Clouder源码介绍.html" class="nav-link">
  Clouder源码介绍
</a></li><li class="dropdown-item"><!----> <a href="/Clouder/怎么开源.html" class="nav-link">
  怎么开源
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Elastic Menu" class="dropdown-title"><span class="title">Elastic</span> <span class="arrow down"></span></button> <button type="button" aria-label="Elastic Menu" class="mobile-dropdown-title"><span class="title">Elastic</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Elastic/es1.1环境安装.html" class="nav-link">
  es1.1环境安装
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es1.2一些概念.html" class="nav-link">
  es1.2一些概念
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es1.3一些API.html" class="nav-link">
  es1.3一些API
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es1.4查询.html" class="nav-link">
  es1.4查询
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es1.5聚合查询.html" class="nav-link">
  es1.5聚合查询
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es1.6ORM.html" class="nav-link">
  es1.6ORM
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es1.7分析器.html" class="nav-link">
  es1.7分析器
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es1.8脚本语言.html" class="nav-link">
  es1.8脚本语言
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es1.9搜索建议.html" class="nav-link">
  es1.9搜索建议
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es2.1高可用性.html" class="nav-link">
  es2.1高可用性
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es2.2搜索查询.html" class="nav-link">
  es2.2搜索查询
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es2.3倒排索引.html" class="nav-link">
  es2.3倒排索引
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es2.4地理查询.html" class="nav-link">
  es2.4地理查询
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es2.5一些概念.html" class="nav-link">
  es2.5一些概念
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es2.6相似性评分.html" class="nav-link">
  es2.6相似性评分
</a></li><li class="dropdown-item"><!----> <a href="/Elastic/es2.7乐观并发控制.html" class="nav-link">
  es2.7乐观并发控制
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java面试题 Menu" class="dropdown-title"><span class="title">Java面试题</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java面试题 Menu" class="mobile-dropdown-title"><span class="title">Java面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Java面试题/一些面试题.html" class="nav-link">
  一些面试题
</a></li><li class="dropdown-item"><!----> <a href="/Java面试题/面试经典150题.html" class="nav-link">
  面试经典150题
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Elastic</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Elastic/es1.1环境安装.html" class="sidebar-link">es1.1环境安装</a></li><li><a href="/Elastic/es1.2一些概念.html" class="sidebar-link">es1.2一些概念</a></li><li><a href="/Elastic/es1.3一些API.html" class="sidebar-link">es1.3一些API</a></li><li><a href="/Elastic/es1.4查询.html" class="sidebar-link">es1.4查询</a></li><li><a href="/Elastic/es1.5聚合查询.html" class="sidebar-link">es1.5聚合查询</a></li><li><a href="/Elastic/es1.6ORM.html" class="sidebar-link">es1.6ORM</a></li><li><a href="/Elastic/es1.7分析器.html" class="active sidebar-link">es1.7分析器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Elastic/es1.7分析器.html#" class="sidebar-link">/</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Elastic/es1.7分析器.html#文本分析-text-analysis" class="sidebar-link" style="padding-left:3rem;">文本分析（Text analysis）</a></li><li class="sidebar-sub-header"><a href="/Elastic/es1.7分析器.html#分析器的组成-composition-of-analyzer" class="sidebar-link" style="padding-left:3rem;">分析器的组成（Composition of analyzer）</a></li><li class="sidebar-sub-header"><a href="/Elastic/es1.7分析器.html#character-filters" class="sidebar-link" style="padding-left:4rem;">Character filters</a></li><li class="sidebar-sub-header"><a href="/Elastic/es1.7分析器.html#html-strip-character-filter" class="sidebar-link" style="padding-left:5rem;">HTML Strip Character Filter</a></li><li class="sidebar-sub-header"><a href="/Elastic/es1.7分析器.html#mapping-character-filter" class="sidebar-link" style="padding-left:5rem;">Mapping Character Filter</a></li><li class="sidebar-sub-header"><a href="/Elastic/es1.7分析器.html#pattern-replace-character-filter" class="sidebar-link" style="padding-left:5rem;">Pattern Replace Character Filter</a></li><li class="sidebar-sub-header"><a href="/Elastic/es1.7分析器.html#tokenizer" class="sidebar-link" style="padding-left:4rem;">Tokenizer</a></li><li class="sidebar-sub-header"><a href="/Elastic/es1.7分析器.html#standard-tokenizer" class="sidebar-link" style="padding-left:5rem;">Standard Tokenizer</a></li><li class="sidebar-sub-header"><a href="/Elastic/es1.7分析器.html#token-filter" class="sidebar-link" style="padding-left:4rem;">Token filter</a></li><li class="sidebar-sub-header"><a href="/Elastic/es1.7分析器.html#lowercase-token-filter" class="sidebar-link" style="padding-left:5rem;">Lowercase Token Filter</a></li><li class="sidebar-sub-header"><a href="/Elastic/es1.7分析器.html#normalization-token-filters" class="sidebar-link" style="padding-left:5rem;">Normalization token filters</a></li><li class="sidebar-sub-header"><a href="/Elastic/es1.7分析器.html#自定义分词器-create-a-custom-analyzer" class="sidebar-link" style="padding-left:4rem;">自定义分词器（Create a custom analyzer）</a></li><li class="sidebar-sub-header"><a href="/Elastic/es1.7分析器.html#my-custom-analyzer" class="sidebar-link" style="padding-left:5rem;">mycustomanalyzer</a></li><li class="sidebar-sub-header"><a href="/Elastic/es1.7分析器.html#内置分析器-built-in-analyzer" class="sidebar-link" style="padding-left:3rem;">内置分析器（Built-in analyzer）</a></li><li class="sidebar-sub-header"><a href="/Elastic/es1.7分析器.html#规范化器-normalizers" class="sidebar-link" style="padding-left:3rem;">规范化器（Normalizers）</a></li><li class="sidebar-sub-header"><a href="/Elastic/es1.7分析器.html#ik中文分词器-ik-chinese-analyzer" class="sidebar-link" style="padding-left:3rem;">IK中文分词器（IK Chinese Analyzer）</a></li><li class="sidebar-sub-header"><a href="/Elastic/es1.7分析器.html#下载安装" class="sidebar-link" style="padding-left:4rem;">下载安装</a></li><li class="sidebar-sub-header"><a href="/Elastic/es1.7分析器.html#ik分词器介绍" class="sidebar-link" style="padding-left:4rem;">IK分词器介绍</a></li><li class="sidebar-sub-header"><a href="/Elastic/es1.7分析器.html#热更新分词库" class="sidebar-link" style="padding-left:4rem;">热更新分词库</a></li><li class="sidebar-sub-header"><a href="/Elastic/es1.7分析器.html#基于远程文件词库-官方" class="sidebar-link" style="padding-left:5rem;">基于远程文件词库（官方）</a></li><li class="sidebar-sub-header"><a href="/Elastic/es1.7分析器.html#基于mysql词库" class="sidebar-link" style="padding-left:5rem;">基于Mysql词库</a></li></ul></li></ul></li><li><a href="/Elastic/es1.8脚本语言.html" class="sidebar-link">es1.8脚本语言</a></li><li><a href="/Elastic/es1.9搜索建议.html" class="sidebar-link">es1.9搜索建议</a></li><li><a href="/Elastic/es2.1高可用性.html" class="sidebar-link">es2.1高可用性</a></li><li><a href="/Elastic/es2.2搜索查询.html" class="sidebar-link">es2.2搜索查询</a></li><li><a href="/Elastic/es2.3倒排索引.html" class="sidebar-link">es2.3倒排索引</a></li><li><a href="/Elastic/es2.4地理查询.html" class="sidebar-link">es2.4地理查询</a></li><li><a href="/Elastic/es2.5一些概念.html" class="sidebar-link">es2.5一些概念</a></li><li><a href="/Elastic/es2.6相似性评分.html" class="sidebar-link">es2.6相似性评分</a></li><li><a href="/Elastic/es2.7乐观并发控制.html" class="sidebar-link">es2.7乐观并发控制</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id=""><a href="#" class="header-anchor">#</a> /</h2> <h4 id="文本分析-text-analysis"><a href="#文本分析-text-analysis" class="header-anchor">#</a> 文本分析（Text analysis）</h4> <div class="language-json line-numbers-mode"><pre class="language-json"><code>文本分析Text analysis是将非结构化文本（如电子邮件正文或产品描述）转换为针对搜索进行优化的结构化格式的过程。
在本节中
Configure text analysis <span class="token comment">//配置文本分析</span>
Built-in analyzer <span class="token comment">//内置分析器</span>
Tokenizer <span class="token comment">//分词器</span>
Token filter <span class="token comment">//令牌过滤器</span>
Character filters <span class="token comment">//字符过滤器</span>
Normalizers <span class="token comment">//规范化器</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="分析器的组成-composition-of-analyzer"><a href="#分析器的组成-composition-of-analyzer" class="header-anchor">#</a> 分析器的组成（Composition of analyzer）</h4> <div class="language-json line-numbers-mode"><pre class="language-json"><code>Anatomy of an analyzer 分析器的解剖
分析器 — 无论是内置的还是自定义的 — 只是一个包含三个较低级别构建块的包：
字符过滤器filters、
标记器tokenizers和
标记过滤器token filters。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="character-filters"><a href="#character-filters" class="header-anchor">#</a> Character filters</h5> <div class="language-json line-numbers-mode"><pre class="language-json"><code>字符过滤器用于在将字符流传递给标记器之前对其进行预处理。
字符过滤器接收作为字符流的原始文本，并可以通过添加、删除或更改字符来转换流。例如，字符过滤器可以用于转换印度-阿拉伯数字 (٠‎١٢٣٤٥٦٧٨‎٩‎) 转换为阿拉伯语-拉丁语等价物（<span class="token number">0123456789</span>），或者从流中剥离HTML元素（如＜b＞）。
Elasticsearch有许多内置的字符过滤器，可用于构建自定义分析器。

HTML Strip Character Filter：去除html元素，如&lt; b &gt;<span class="token punctuation">,</span>并解码HTML实体，如&amp; amp。
Mapping Character Filter：用指定的替换项替换任何出现的指定字符串。
Pattern Replace Character Filter：用指定的替换替换任何匹配正则表达式的字符。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h6 id="html-strip-character-filter"><a href="#html-strip-character-filter" class="header-anchor">#</a> HTML Strip Character Filter</h6> <div class="language-json line-numbers-mode"><pre class="language-json"><code>GET /_analyze
<span class="token punctuation">{</span>
  <span class="token property">&quot;tokenizer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;char_filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;html_strip&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;p&gt;I&amp;apos;m so &lt;b&gt;happy&lt;/b&gt;!&lt;/p&gt;&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h6 id="mapping-character-filter"><a href="#mapping-character-filter" class="header-anchor">#</a> Mapping Character Filter</h6> <div class="language-json line-numbers-mode"><pre class="language-json"><code>GET /_analyze
<span class="token punctuation">{</span>
  <span class="token property">&quot;tokenizer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;char_filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mapping&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;٠ =&gt; 0&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;١ =&gt; 1&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;٢ =&gt; 2&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;٣ =&gt; 3&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;٤ =&gt; 4&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;٥ =&gt; 5&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;٦ =&gt; 6&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;٧ =&gt; 7&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;٨ =&gt; 8&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;٩ =&gt; 9&quot;</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;My license plate is ٢٥٠١٥&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h6 id="pattern-replace-character-filter"><a href="#pattern-replace-character-filter" class="header-anchor">#</a> Pattern Replace Character Filter</h6> <div class="language-json line-numbers-mode"><pre class="language-json"><code>PUT my-index<span class="token number">-00001</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;analysis&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;my_analyzer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;tokenizer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;standard&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;char_filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;my_char_filter&quot;</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;char_filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;my_char_filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pattern_replace&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;pattern&quot;</span><span class="token operator">:</span> <span class="token string">&quot;(\\d+)-(?=\\d)&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;replacement&quot;</span><span class="token operator">:</span> <span class="token string">&quot;$1_&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

POST my-index<span class="token number">-00001</span>/_analyze
<span class="token punctuation">{</span>
  <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my_analyzer&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;My credit card is 123-456-789&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h5 id="tokenizer"><a href="#tokenizer" class="header-anchor">#</a> Tokenizer</h5> <div class="language-json line-numbers-mode"><pre class="language-json"><code>断词器Tokenizer接收字符流，将其分解为单独的标记（通常是单独的单词），并输出标记流。例如，空白标记器在看到任何空白时都会将文本分解为标记。它会将文本“Quick brown fox！”转换为术语<span class="token punctuation">[</span>Quick，brown，fox！<span class="token punctuation">]</span>。

令牌化器还负责记录以下内容：
每个术语的顺序或位置（用于短语和单词接近度查询）
术语所代表的原始单词的开始和结束字符偏移量（用于突出显示搜索片段）。
令牌类型，生成的每个术语的分类，如、或。更简单的分析器只生成单词标记类型。

Elasticsearch有许多内置的标记器，可用于构建自定义分析器。
Standard Tokenizer：根据Unicode文本分割算法的定义，将文本划分为单词边界上的术语。它删除了大多数标点符号。它是大多数语言的最佳选择。
Letter Tokenizer：每当遇到非字母字符时，字母标记器就会将文本划分为多个术语。
Lowercase Tokenizer：小写标记器与字母标记器一样，每当遇到不是字母的字符时，都会将文本划分为多个术语，但它也会降低所有术语的大小写。
Whitespace Tokenizer：每当遇到任何空白字符时，空白标记器都会将文本划分为多个术语。
UAX URL Email Tokenizer：与标准令牌化器类似，只是它将url和电子邮件地址识别为单个令牌。
Classic Tokenizer：经典标记器是一种基于语法的英语标记器。
Thai Tokenizer：泰语标记器将泰语文本分割成单词。

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h6 id="standard-tokenizer"><a href="#standard-tokenizer" class="header-anchor">#</a> Standard Tokenizer</h6> <div class="language-json line-numbers-mode"><pre class="language-json"><code>POST _analyze
<span class="token punctuation">{</span>
  <span class="token property">&quot;tokenizer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;standard&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;The 2 QUICK Brown-Foxes jumped over the lazy dog's bone.&quot;</span>
<span class="token punctuation">}</span>

上述句子将产生以下术语：
<span class="token punctuation">[</span> The<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> QUICK<span class="token punctuation">,</span> Brown<span class="token punctuation">,</span> Foxes<span class="token punctuation">,</span> jumped<span class="token punctuation">,</span> over<span class="token punctuation">,</span> the<span class="token punctuation">,</span> lazy<span class="token punctuation">,</span> dog's<span class="token punctuation">,</span> bone <span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h5 id="token-filter"><a href="#token-filter" class="header-anchor">#</a> Token filter</h5> <div class="language-json line-numbers-mode"><pre class="language-json"><code>令牌过滤器Token filter接受来自令牌化器的令牌流，并可以修改令牌（例如lowercasing）、删除令牌（例如stopwords）或添加令牌（例如synonyms）。
Elasticsearch有许多内置的令牌过滤器，可以用来构建自定义分析器。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h6 id="lowercase-token-filter"><a href="#lowercase-token-filter" class="header-anchor">#</a> Lowercase Token Filter</h6> <div class="language-json line-numbers-mode"><pre class="language-json"><code>PUT my-index<span class="token number">-000001</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;analysis&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;my_custom_analyzer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span> 
          <span class="token property">&quot;tokenizer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;standard&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;char_filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;html_strip&quot;</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token property">&quot;filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;lowercase&quot;</span><span class="token punctuation">,</span><span class="token comment">//Lowercase Token Filter</span>
            <span class="token string">&quot;asciifolding&quot;</span><span class="token comment">//ASCII-Folding Token Filter</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

POST my-index<span class="token number">-000001</span>/_analyze
<span class="token punctuation">{</span>
  <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my_custom_analyzer&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Is this &lt;b&gt;déjà vu&lt;/b&gt;?&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h6 id="normalization-token-filters"><a href="#normalization-token-filters" class="header-anchor">#</a> Normalization token filters</h6> <div class="language-json line-numbers-mode"><pre class="language-json"><code>规范化令牌筛选器
有几个可用的令牌过滤器，试图规范特定语言的特殊字符。

arabic_normalization 阿拉伯语
german_normalization 德国
hindi_normalization 印地语
indic_normalization 印度
sorani_normalization 库尔德语（索拉尼语）
persian_normalization 波斯语
scandinavian_normalization<span class="token punctuation">,</span> scandinavian_folding 斯堪的纳维亚
serbian_normalization 塞尔维亚语
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h5 id="自定义分词器-create-a-custom-analyzer"><a href="#自定义分词器-create-a-custom-analyzer" class="header-anchor">#</a> 自定义分词器（Create a custom analyzer）</h5> <div class="language-json line-numbers-mode"><pre class="language-json"><code>Elasticsearch有许多内置的令牌过滤器token filters，可以用来构建自定义分析器。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h6 id="my-custom-analyzer"><a href="#my-custom-analyzer" class="header-anchor">#</a> my_custom_analyzer</h6> <div class="language-json line-numbers-mode"><pre class="language-json"><code>PUT my-index<span class="token number">-000001</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;analysis&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;my_custom_analyzer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span> 
          <span class="token property">&quot;tokenizer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;standard&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;char_filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;html_strip&quot;</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token property">&quot;filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;lowercase&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;asciifolding&quot;</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

POST my-index<span class="token number">-000001</span>/_analyze
<span class="token punctuation">{</span>
  <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my_custom_analyzer&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Is this &lt;b&gt;déjà vu&lt;/b&gt;?&quot;</span>
<span class="token punctuation">}</span>


上面的例子产生了以下术语：
<span class="token punctuation">[</span> is<span class="token punctuation">,</span> this<span class="token punctuation">,</span> deja<span class="token punctuation">,</span> vu <span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h4 id="内置分析器-built-in-analyzer"><a href="#内置分析器-built-in-analyzer" class="header-anchor">#</a> 内置分析器（Built-in analyzer）</h4> <div class="language-json line-numbers-mode"><pre class="language-json"><code>Built-in analyzer
Elasticsearch提供了广泛的内置分析器，无需进一步配置即可用于任何索引：

Standard Analyzer 标准分析器
Simple Analyzer 简单分析器
Whitespace Analyzer 空白分析器
Stop Analyzer 停止分析器
Keyword Analyzer 关键字分析器
Pattern Analyzer 模式分析器
Language Analyzers 语言分析器
Fingerprint Analyzer 指纹分析器
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="规范化器-normalizers"><a href="#规范化器-normalizers" class="header-anchor">#</a> 规范化器（Normalizers）</h4> <div class="language-json line-numbers-mode"><pre class="language-json"><code>规范化器Normalizers 与分析器analyzers 类似，不同之处在于它们只能发出单个令牌。因此，它们没有标记化器，只接受可用的字符过滤器和标记过滤器的子集。只允许使用按字符工作的筛选器。例如，允许使用小写过滤器，但不允许使用词干过滤器，因为词干过滤器需要将关键字作为一个整体来查看。可以在规范化器中使用的过滤器的当前列表如下：
arabic_normalization<span class="token punctuation">,</span> 
asciifolding<span class="token punctuation">,</span> 
bengali_normalization<span class="token punctuation">,</span> 
cjk_width<span class="token punctuation">,</span> 
decimal_digit<span class="token punctuation">,</span> 
elision<span class="token punctuation">,</span> 
german_normalization<span class="token punctuation">,</span> 
hindi_normalization<span class="token punctuation">,</span> 
indic_normalization<span class="token punctuation">,</span> 
lowercase<span class="token punctuation">,</span> 
persian_normalization<span class="token punctuation">,</span> 
scandinavian_folding<span class="token punctuation">,</span> 
serbian_normalization<span class="token punctuation">,</span> 
sorani_normalization<span class="token punctuation">,</span> 
uppercase.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="ik中文分词器-ik-chinese-analyzer"><a href="#ik中文分词器-ik-chinese-analyzer" class="header-anchor">#</a> IK中文分词器（IK Chinese Analyzer）</h4> <h5 id="下载安装"><a href="#下载安装" class="header-anchor">#</a> 下载安装</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>#下载
https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.10.0/elasticsearch-analysis-ik-7.10.0.zip

#安装
解压到/plugins/ik/
重启elasticsearch
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="ik分词器介绍"><a href="#ik分词器介绍" class="header-anchor">#</a> IK分词器介绍</h5> <p>主词库main.dic、停用词库stopword.dic、特殊词库、自定义词库。</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>https<span class="token operator">:</span><span class="token comment">//github.com/medcl/elasticsearch-analysis-ik/</span>

ik_max_word 和 ik_smart 什么区别?
ik_max_word<span class="token operator">:</span> 会将文本做最细粒度的拆分，比如会将“中华人民共和国国歌”拆分为“中华人民共和国<span class="token punctuation">,</span>中华人民<span class="token punctuation">,</span>中华<span class="token punctuation">,</span>华人<span class="token punctuation">,</span>人民共和国<span class="token punctuation">,</span>人民<span class="token punctuation">,</span>人<span class="token punctuation">,</span>民<span class="token punctuation">,</span>共和国<span class="token punctuation">,</span>共和<span class="token punctuation">,</span>和<span class="token punctuation">,</span>国国<span class="token punctuation">,</span>国歌”，会穷尽各种可能的组合，适合 Term Query；
ik_smart<span class="token operator">:</span> 会做最粗粒度的拆分，比如会将“中华人民共和国国歌”拆分为“中华人民共和国<span class="token punctuation">,</span>国歌”，适合 Phrase 查询。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-json line-numbers-mode"><pre class="language-json"><code>GET easyes_document/_analyze
<span class="token punctuation">{</span>
  <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ik_smart&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;测试内容1&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;tokens&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;测试&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;内容&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ARABIC&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h5 id="热更新分词库"><a href="#热更新分词库" class="header-anchor">#</a> 热更新分词库</h5> <h6 id="基于远程文件词库-官方"><a href="#基于远程文件词库-官方" class="header-anchor">#</a> 基于远程文件词库（官方）</h6> <p>目前该插件支持热更新 IK 分词，通过上文在 IK 配置文件中提到的如下配置</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code> 	&lt;!--用户可以在这里配置远程扩展字典 --&gt;
	&lt;entry key=<span class="token string">&quot;remote_ext_dict&quot;</span>&gt;location&lt;/entry&gt;
 	&lt;!--用户可以在这里配置远程扩展停止词字典--&gt;
	&lt;entry key=<span class="token string">&quot;remote_ext_stopwords&quot;</span>&gt;location&lt;/entry&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>其中 location 是指一个 url，比如 http://yoursite.com/getCustomDict，该请求只需满足以下两点即可完成分词热更新。<br>1、该 http 请求需要返回两个头部(header)，一个是 Last-Modified，一个是 ETag，这两者都是字符串类型，只要有一个发生变化，该插件就会去抓取新的分词进而更新词库。<br>2、该 http 请求返回的内容格式是一行一个分词，换行符用 \n 即可。<br>满足上面两点要求就可以实现热更新分词了，不需要重启 ES 实例。<br>可以将需自动更新的热词放在一个 UTF-8 编码的 .txt 文件里，放在 nginx 或其他简易 http server 下，当 .txt 文件修改时，http server 会在客户端请求该文件时自动返回相应的 Last-Modified 和 ETag。可以另外做一个工具来从业务系统提取相关词汇，并更新这个 .txt 文件。</p> <h6 id="基于mysql词库"><a href="#基于mysql词库" class="header-anchor">#</a> 基于Mysql词库</h6> <p>1、在ik初始化词库源码处，会加载文件词库，新增加载Mysql词库。（这不是热更新）<br>2、热更新还要参考<code>远程文件词库</code>热更新。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Elastic/es1.6ORM.html" class="prev">
        es1.6ORM
      </a></span> <span class="next"><a href="/Elastic/es1.8脚本语言.html">
        es1.8脚本语言
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ea24880d.js" defer></script><script src="/assets/js/2.ae7b2f73.js" defer></script><script src="/assets/js/1.5784faf9.js" defer></script><script src="/assets/js/33.6e0d0fb4.js" defer></script>
  </body>
</html>
